[{"data":1,"prerenderedAt":685},["Reactive",2],{"blog-page-1-ko":3},[4,7],[5],{"_draft":6},false,[8],{"_path":9,"_dir":10,"_draft":6,"_partial":6,"_locale":11,"title":12,"description":13,"createdAt":14,"updatedAt":15,"cover":16,"tags":17,"body":20,"_type":680,"_id":681,"_source":682,"_file":683,"_extension":684},"/blog/2024/03/setting-the-timezone-in-alpine","03","ko","알파인 리눅스에서 타임존 설정하기 : 로컬 환경과 도커 이미지에서의 처리 방법","프로덕션 환경에서는 cron 작업이나 로그 시간 현지화 그리고 DB와 OS 간의 시간 동기화 등의 이유로 직접 타임존을 설정해야 하는 경우가 있다. 타임존 설정 방법은 배포판에 따라 차이가 있는데, 이번 글에서는 도커 환경을 구축할 때 자주 사용되는 Alpine...","2024-03-05 13:05",null,"/s3/devlog/1_setting-the-timezone-in-alpine/072bf123-f28a-4603-b6ef-48cb012da79a.webp",[18,19],"Alpine linux","Docker",{"type":21,"children":22,"toc":666},"root",[23,31,38,43,57,69,104,117,156,162,183,213,219,230,272,284,309,315,320,326,331,422,464,470,488,493,660],{"type":24,"tag":25,"props":26,"children":27},"element","p",{},[28],{"type":29,"value":30},"text","프로덕션 환경에서는 cron 작업이나 로그 시간 현지화 그리고 DB와 OS 간의 시간 동기화 등의 이유로 직접 타임존을 설정해야 하는 경우가 있다.\n타임존 설정 방법은 리눅스 배포판 별로 차이가 있는데, 이번 글에서는 경량 리눅스 배포판 중 하나인 Alpine linux에서의 타임존 설정 방법을 알아보고, 도커 환경에서 설정할 시 최적화하여 적용하는 방법에 대해서도 알아보겠다.",{"type":24,"tag":32,"props":33,"children":35},"h2",{"id":34},"로컬-환경에서의-타임존-설정",[36],{"type":29,"value":37},"로컬 환경에서의 타임존 설정",{"type":24,"tag":25,"props":39,"children":40},{},[41],{"type":29,"value":42},"먼저, 직접 컴퓨터에 설치해서 사용하는 로컬 환경에서의 설정 방법을 알아보겠다.",{"type":24,"tag":44,"props":45,"children":47},"h3",{"id":46},"tzdata-패키지-설치하기",[48,55],{"type":24,"tag":49,"props":50,"children":52},"code",{"className":51},[],[53],{"type":29,"value":54},"tzdata",{"type":29,"value":56}," 패키지 설치하기",{"type":24,"tag":25,"props":58,"children":59},{},[60,62,67],{"type":29,"value":61},"알파인 리눅스에는 타임존 설정 관련 패키지가 포함되어 있지 않으므로, ",{"type":24,"tag":49,"props":63,"children":65},{"className":64},[],[66],{"type":29,"value":54},{"type":29,"value":68}," 패키지를 설치하도록 한다.",{"type":24,"tag":70,"props":71,"children":77},"pre",{"code":72,"filename":73,"language":74,"meta":75,"className":76,"style":75},"apk add tzdata \n","Terminal","bash","","language-bash shiki shiki-themes github-light material-theme-ocean",[78],{"type":24,"tag":49,"props":79,"children":80},{"__ignoreMap":75},[81],{"type":24,"tag":82,"props":83,"children":86},"span",{"class":84,"line":85},"line",1,[87,93,99],{"type":24,"tag":82,"props":88,"children":90},{"style":89},"--shiki-default:#6F42C1;--shiki-dark:#FFCB6B",[91],{"type":29,"value":92},"apk",{"type":24,"tag":82,"props":94,"children":96},{"style":95},"--shiki-default:#032F62;--shiki-dark:#C3E88D",[97],{"type":29,"value":98}," add",{"type":24,"tag":82,"props":100,"children":101},{"style":95},[102],{"type":29,"value":103}," tzdata\n",{"type":24,"tag":25,"props":105,"children":106},{},[107,109,115],{"type":29,"value":108},"패키지가 정상적으로 설치가 되었는지 ",{"type":24,"tag":49,"props":110,"children":112},{"className":111},[],[113],{"type":29,"value":114},"ls -L",{"type":29,"value":116}," 명령어로 확인해본다.\n이 명령어는 심볼릭 링크가 가리키는 실제 파일이나 디렉토리의 정보를 표시한다.",{"type":24,"tag":118,"props":119,"children":120},"code-group",{},[121,147],{"type":24,"tag":70,"props":122,"children":124},{"code":123,"filename":73,"language":74,"meta":75,"className":76,"style":75},"ls -L /usr/share/zoneinfo/\n",[125],{"type":24,"tag":49,"props":126,"children":127},{"__ignoreMap":75},[128],{"type":24,"tag":82,"props":129,"children":130},{"class":84,"line":85},[131,136,142],{"type":24,"tag":82,"props":132,"children":133},{"style":89},[134],{"type":29,"value":135},"ls",{"type":24,"tag":82,"props":137,"children":139},{"style":138},"--shiki-default:#005CC5;--shiki-dark:#C3E88D",[140],{"type":29,"value":141}," -L",{"type":24,"tag":82,"props":143,"children":144},{"style":95},[145],{"type":29,"value":146}," /usr/share/zoneinfo/\n",{"type":24,"tag":70,"props":148,"children":151},{"code":149,"filename":150,"meta":75},"Africa             CST6CDT            Etc                Greenwich          Kwajalein          PRC                UCT                posixrules       \nAmerica            Canada             Europe             HST                Libya              PST8PDT            US                 right\nAntarctica         Chile              Factory            Hongkong           MET                Pacific            UTC                zone.tab\nArctic             Cuba               GB                 Iceland            MST                Poland             Universal          zone1970.tab\nAsia               EET                GB-Eire            Indian             MST7MDT            Portugal           W-SU\nAtlantic           EST                GMT                Iran               Mexico             ROC                WET\nAustralia          EST5EDT            GMT+0              Israel             NZ                 ROK                Zulu\nBrazil             Egypt              GMT-0              Jamaica            NZ-CHAT            Singapore          iso3166.tab\nCET                Eire               GMT0               Japan              Navajo             Turkey             leap-seconds.list\n","Output",[152],{"type":24,"tag":49,"props":153,"children":154},{"__ignoreMap":75},[155],{"type":29,"value":149},{"type":24,"tag":44,"props":157,"children":159},{"id":158},"localtime-파일에-원하는-타임존으로-심볼릭-링크-설정",[160],{"type":29,"value":161},"localtime 파일에 원하는 타임존으로 심볼릭 링크 설정",{"type":24,"tag":25,"props":163,"children":164},{},[165,167,173,175,181],{"type":29,"value":166},"필자는 한국 시간으로 타임존을 설정할 것이기 때문에 ",{"type":24,"tag":49,"props":168,"children":170},{"className":169},[],[171],{"type":29,"value":172},"Asia/Seoul",{"type":29,"value":174}," 파일에 심볼릭 링크를 설정할 것이다.\n심볼릭 링크의 타겟 경로는 ",{"type":24,"tag":49,"props":176,"children":178},{"className":177},[],[179],{"type":29,"value":180},"/etc/localtime",{"type":29,"value":182},"이다.",{"type":24,"tag":70,"props":184,"children":186},{"code":185,"filename":73,"language":74,"meta":75,"className":76,"style":75},"ln -s /usr/share/zoneinfo/Asia/Seoul /etc/localtime \n",[187],{"type":24,"tag":49,"props":188,"children":189},{"__ignoreMap":75},[190],{"type":24,"tag":82,"props":191,"children":192},{"class":84,"line":85},[193,198,203,208],{"type":24,"tag":82,"props":194,"children":195},{"style":89},[196],{"type":29,"value":197},"ln",{"type":24,"tag":82,"props":199,"children":200},{"style":138},[201],{"type":29,"value":202}," -s",{"type":24,"tag":82,"props":204,"children":205},{"style":95},[206],{"type":29,"value":207}," /usr/share/zoneinfo/Asia/Seoul",{"type":24,"tag":82,"props":209,"children":210},{"style":95},[211],{"type":29,"value":212}," /etc/localtime\n",{"type":24,"tag":44,"props":214,"children":216},{"id":215},"선택사항-timezone-파일에-명시적으로-타임존-지정",[217],{"type":29,"value":218},"(선택사항) timezone 파일에 명시적으로 타임존 지정",{"type":24,"tag":25,"props":220,"children":221},{},[222,228],{"type":24,"tag":49,"props":223,"children":225},{"className":224},[],[226],{"type":29,"value":227},"/etc/timezone",{"type":29,"value":229},"에 설정한 타임존이 반영되지는 않지만, 명시적인 이용을 위해서 지정해주는 것이 좋다.",{"type":24,"tag":70,"props":231,"children":233},{"code":232,"filename":73,"language":74,"meta":75,"className":76,"style":75},"echo \"Asia/Seoul\" > /etc/timezone\n",[234],{"type":24,"tag":49,"props":235,"children":236},{"__ignoreMap":75},[237],{"type":24,"tag":82,"props":238,"children":239},{"class":84,"line":85},[240,246,252,256,261,267],{"type":24,"tag":82,"props":241,"children":243},{"style":242},"--shiki-default:#005CC5;--shiki-dark:#82AAFF",[244],{"type":29,"value":245},"echo",{"type":24,"tag":82,"props":247,"children":249},{"style":248},"--shiki-default:#032F62;--shiki-dark:#89DDFF",[250],{"type":29,"value":251}," \"",{"type":24,"tag":82,"props":253,"children":254},{"style":95},[255],{"type":29,"value":172},{"type":24,"tag":82,"props":257,"children":258},{"style":248},[259],{"type":29,"value":260},"\"",{"type":24,"tag":82,"props":262,"children":264},{"style":263},"--shiki-default:#D73A49;--shiki-dark:#89DDFF",[265],{"type":29,"value":266}," >",{"type":24,"tag":82,"props":268,"children":269},{"style":95},[270],{"type":29,"value":271}," /etc/timezone\n",{"type":24,"tag":44,"props":273,"children":275},{"id":274},"date-명령어로-확인",[276,282],{"type":24,"tag":49,"props":277,"children":279},{"className":278},[],[280],{"type":29,"value":281},"date",{"type":29,"value":283}," 명령어로 확인",{"type":24,"tag":118,"props":285,"children":286},{},[287,301],{"type":24,"tag":70,"props":288,"children":290},{"code":289,"filename":73,"language":74,"meta":75,"className":76,"style":75},"date\n",[291],{"type":24,"tag":49,"props":292,"children":293},{"__ignoreMap":75},[294],{"type":24,"tag":82,"props":295,"children":296},{"class":84,"line":85},[297],{"type":24,"tag":82,"props":298,"children":299},{"style":89},[300],{"type":29,"value":289},{"type":24,"tag":70,"props":302,"children":304},{"code":303,"filename":150,"meta":75},"Fri May 12 12:44:46 KST 2023\n",[305],{"type":24,"tag":49,"props":306,"children":307},{"__ignoreMap":75},[308],{"type":29,"value":303},{"type":24,"tag":32,"props":310,"children":312},{"id":311},"도커-환경에서의-타임존-설정",[313],{"type":29,"value":314},"도커 환경에서의 타임존 설정",{"type":24,"tag":25,"props":316,"children":317},{},[318],{"type":29,"value":319},"도커 환경에서 알파인 리눅스 타임존을 설정할 때는, 위에서 살펴본 각 단계를 그대로 도커 파일로 작성하면 된다.\n프로젝트 환경에 따라 선택할 수 있는 단일 스테이지 빌드와 다중 스테이지 빌드를 통해 도커 환경에서의 타임존 설정을 최적화할 수 있다.",{"type":24,"tag":44,"props":321,"children":323},{"id":322},"단일-스테이지-빌드",[324],{"type":29,"value":325},"단일 스테이지 빌드",{"type":24,"tag":25,"props":327,"children":328},{},[329],{"type":29,"value":330},"단일 스테이지 빌드는 단순한 환경에서 사용되며, 각 단계를 순차적으로 진행하여 이미지를 빌드한다.\n다음은 단일 스테이지 빌드를 사용하여 도커 이미지를 빌드하는 방법이다.",{"type":24,"tag":70,"props":332,"children":341},{"code":333,"filename":334,"highlights":335,"language":339,"meta":75,"className":340,"style":75},"FROM node:18.16.0-alpine3.17  \n\nRUN apk add --no-cache tzdata && \\\n    cp /usr/share/zoneinfo/Asia/Seoul /etc/localtime && \\\n    echo \"Asia/Seoul\" > /etc/timezone && \\\n    apk del tzdata\n","Dockerfile",[336,337,338],3,4,6,"docker","language-docker shiki shiki-themes github-light material-theme-ocean",[342],{"type":24,"tag":49,"props":343,"children":344},{"__ignoreMap":75},[345,360,370,385,394,413],{"type":24,"tag":82,"props":346,"children":347},{"class":84,"line":85},[348,354],{"type":24,"tag":82,"props":349,"children":351},{"style":350},"--shiki-default:#D73A49;--shiki-dark:#F78C6C",[352],{"type":29,"value":353},"FROM",{"type":24,"tag":82,"props":355,"children":357},{"style":356},"--shiki-default:#24292E;--shiki-dark:#BABED8",[358],{"type":29,"value":359}," node:18.16.0-alpine3.17  \n",{"type":24,"tag":82,"props":361,"children":363},{"class":84,"line":362},2,[364],{"type":24,"tag":82,"props":365,"children":367},{"emptyLinePlaceholder":366},true,[368],{"type":29,"value":369},"\n",{"type":24,"tag":82,"props":371,"children":374},{"class":372,"line":336},[84,373],"highlight",[375,380],{"type":24,"tag":82,"props":376,"children":377},{"style":350},[378],{"type":29,"value":379},"RUN",{"type":24,"tag":82,"props":381,"children":382},{"style":356},[383],{"type":29,"value":384}," apk add --no-cache tzdata && \\\n",{"type":24,"tag":82,"props":386,"children":388},{"class":387,"line":337},[84,373],[389],{"type":24,"tag":82,"props":390,"children":391},{"style":356},[392],{"type":29,"value":393},"    cp /usr/share/zoneinfo/Asia/Seoul /etc/localtime && \\\n",{"type":24,"tag":82,"props":395,"children":397},{"class":84,"line":396},5,[398,403,408],{"type":24,"tag":82,"props":399,"children":400},{"style":356},[401],{"type":29,"value":402},"    echo ",{"type":24,"tag":82,"props":404,"children":405},{"style":95},[406],{"type":29,"value":407},"\"Asia/Seoul\"",{"type":24,"tag":82,"props":409,"children":410},{"style":356},[411],{"type":29,"value":412}," > /etc/timezone && \\\n",{"type":24,"tag":82,"props":414,"children":416},{"class":415,"line":338},[84,373],[417],{"type":24,"tag":82,"props":418,"children":419},{"style":356},[420],{"type":29,"value":421},"    apk del tzdata\n",{"type":24,"tag":423,"props":424,"children":425},"ul",{},[426,440,452],{"type":24,"tag":427,"props":428,"children":429},"li",{},[430,432,438],{"type":29,"value":431},"3행: ",{"type":24,"tag":49,"props":433,"children":435},{"className":434},[],[436],{"type":29,"value":437},"--no-cache",{"type":29,"value":439}," 플래그가 사용됐는데, 패키지를 설치할 때 캐시를 저장하지 않음으로써, 이미지를 경량화 하기 위해 사용된다.",{"type":24,"tag":427,"props":441,"children":442},{},[443,445,450],{"type":29,"value":444},"4행: ",{"type":24,"tag":49,"props":446,"children":448},{"className":447},[],[449],{"type":29,"value":54},{"type":29,"value":451}," 패키지를 삭제할 것이기 때문에, 심볼릭 링크를 설정하지 않고 복사한다.",{"type":24,"tag":427,"props":453,"children":454},{},[455,457,462],{"type":29,"value":456},"6행: 더 이상 필요치 않은 ",{"type":24,"tag":49,"props":458,"children":460},{"className":459},[],[461],{"type":29,"value":54},{"type":29,"value":463}," 패키지를 삭제하여 이미지를 경량화 해준다.",{"type":24,"tag":44,"props":465,"children":467},{"id":466},"다중-스테이지-빌드",[468],{"type":29,"value":469},"다중 스테이지 빌드",{"type":24,"tag":471,"props":472,"children":474},"alert",{"title":473},"Multi-stage builds란?",[475],{"type":24,"tag":25,"props":476,"children":477},{},[478,480,486],{"type":29,"value":479},"Docker v17.06부터 지원되는 기능으로, 도커 이미지를 ",{"type":24,"tag":49,"props":481,"children":483},{"className":482},[],[484],{"type":29,"value":485},"빌드하는 과정에는 필요하지만 최종 결과물에는 필요치 않은 요소들을 쉽게 제외",{"type":29,"value":487},"하기 위해서 단계를 나누는 기능이다.",{"type":24,"tag":25,"props":489,"children":490},{},[491],{"type":29,"value":492},"다중 스테이지 빌드는 복잡한 환경에서 강점을 가지며, 빌드 프로세스를 여러 단계로 나누어 최종 이미지에 필요한 파일만 포함시킨다.\n다음은 다중 스테이지 빌드를 사용하여 도커 이미지를 빌드하는 방법이다.",{"type":24,"tag":70,"props":494,"children":496},{"code":495,"filename":334,"language":339,"meta":75,"className":340,"style":75},"FROM node:18.16.0-alpine3.17 AS base\n\n# Builder process\nFROM base AS builder\n\nRUN apk add tzdata\n\n# Runner process\nFROM base AS runner\n\nCOPY --from=builder /usr/share/zoneinfo/Asia/Seoul /etc/localtime\nRUN echo \"Asia/Seoul\" > /etc/timezone\n",[497],{"type":24,"tag":49,"props":498,"children":499},{"__ignoreMap":75},[500,522,529,538,559,566,578,586,595,616,624,638],{"type":24,"tag":82,"props":501,"children":502},{"class":84,"line":85},[503,507,512,517],{"type":24,"tag":82,"props":504,"children":505},{"style":350},[506],{"type":29,"value":353},{"type":24,"tag":82,"props":508,"children":509},{"style":356},[510],{"type":29,"value":511}," node:18.16.0-alpine3.17 ",{"type":24,"tag":82,"props":513,"children":514},{"style":350},[515],{"type":29,"value":516},"AS",{"type":24,"tag":82,"props":518,"children":519},{"style":356},[520],{"type":29,"value":521}," base\n",{"type":24,"tag":82,"props":523,"children":524},{"class":84,"line":362},[525],{"type":24,"tag":82,"props":526,"children":527},{"emptyLinePlaceholder":366},[528],{"type":29,"value":369},{"type":24,"tag":82,"props":530,"children":531},{"class":84,"line":336},[532],{"type":24,"tag":82,"props":533,"children":535},{"style":534},"--shiki-default:#6A737D;--shiki-dark:#464B5D;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic",[536],{"type":29,"value":537},"# Builder process\n",{"type":24,"tag":82,"props":539,"children":540},{"class":84,"line":337},[541,545,550,554],{"type":24,"tag":82,"props":542,"children":543},{"style":350},[544],{"type":29,"value":353},{"type":24,"tag":82,"props":546,"children":547},{"style":356},[548],{"type":29,"value":549}," base ",{"type":24,"tag":82,"props":551,"children":552},{"style":350},[553],{"type":29,"value":516},{"type":24,"tag":82,"props":555,"children":556},{"style":356},[557],{"type":29,"value":558}," builder\n",{"type":24,"tag":82,"props":560,"children":561},{"class":84,"line":396},[562],{"type":24,"tag":82,"props":563,"children":564},{"emptyLinePlaceholder":366},[565],{"type":29,"value":369},{"type":24,"tag":82,"props":567,"children":568},{"class":84,"line":338},[569,573],{"type":24,"tag":82,"props":570,"children":571},{"style":350},[572],{"type":29,"value":379},{"type":24,"tag":82,"props":574,"children":575},{"style":356},[576],{"type":29,"value":577}," apk add tzdata\n",{"type":24,"tag":82,"props":579,"children":581},{"class":84,"line":580},7,[582],{"type":24,"tag":82,"props":583,"children":584},{"emptyLinePlaceholder":366},[585],{"type":29,"value":369},{"type":24,"tag":82,"props":587,"children":589},{"class":84,"line":588},8,[590],{"type":24,"tag":82,"props":591,"children":592},{"style":534},[593],{"type":29,"value":594},"# Runner process\n",{"type":24,"tag":82,"props":596,"children":598},{"class":84,"line":597},9,[599,603,607,611],{"type":24,"tag":82,"props":600,"children":601},{"style":350},[602],{"type":29,"value":353},{"type":24,"tag":82,"props":604,"children":605},{"style":356},[606],{"type":29,"value":549},{"type":24,"tag":82,"props":608,"children":609},{"style":350},[610],{"type":29,"value":516},{"type":24,"tag":82,"props":612,"children":613},{"style":356},[614],{"type":29,"value":615}," runner\n",{"type":24,"tag":82,"props":617,"children":619},{"class":84,"line":618},10,[620],{"type":24,"tag":82,"props":621,"children":622},{"emptyLinePlaceholder":366},[623],{"type":29,"value":369},{"type":24,"tag":82,"props":625,"children":627},{"class":84,"line":626},11,[628,633],{"type":24,"tag":82,"props":629,"children":630},{"style":350},[631],{"type":29,"value":632},"COPY",{"type":24,"tag":82,"props":634,"children":635},{"style":356},[636],{"type":29,"value":637}," --from=builder /usr/share/zoneinfo/Asia/Seoul /etc/localtime\n",{"type":24,"tag":82,"props":639,"children":641},{"class":84,"line":640},12,[642,646,651,655],{"type":24,"tag":82,"props":643,"children":644},{"style":350},[645],{"type":29,"value":379},{"type":24,"tag":82,"props":647,"children":648},{"style":356},[649],{"type":29,"value":650}," echo ",{"type":24,"tag":82,"props":652,"children":653},{"style":95},[654],{"type":29,"value":407},{"type":24,"tag":82,"props":656,"children":657},{"style":356},[658],{"type":29,"value":659}," > /etc/timezone\n",{"type":24,"tag":661,"props":662,"children":663},"style",{},[664],{"type":29,"value":665},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":75,"searchDepth":362,"depth":362,"links":667},[668,676],{"id":34,"depth":362,"text":37,"children":669},[670,672,673,674],{"id":46,"depth":336,"text":671},"tzdata 패키지 설치하기",{"id":158,"depth":336,"text":161},{"id":215,"depth":336,"text":218},{"id":274,"depth":336,"text":675},"date 명령어로 확인",{"id":311,"depth":362,"text":314,"children":677},[678,679],{"id":322,"depth":336,"text":325},{"id":466,"depth":336,"text":469},"markdown","content:ko:blog:2024:03:1.setting-the-timezone-in-alpine.md","content","ko/blog/2024/03/1.setting-the-timezone-in-alpine.md","md",1710841697731]