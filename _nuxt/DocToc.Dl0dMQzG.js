import{d as w,q as N,a8 as P,a9 as E,V as M,a as A,c as T,l as I,r as B,x as p,j as q,z as b,A as _,S as O,L as j,U as H,_ as R}from"./entry.vTdoUZMO.js";import $ from"./DocTocLinks.RxM2AF7i.js";import z from"./DocTocMarker.DWaQ4hi4.js";const D={class:"doc-toc__label"},G=.1,V=.2,U=w({__name:"DocToc",props:{title:{type:String,default:"Table of Contents"},links:{type:Array,default:()=>[]}},setup(d){const u=N(!1);let g,c,f,y,k;P().hooks.hookOnce("page:finish",()=>{g=document.querySelector(".doc-toc"),c=g.querySelector(".doc-toc__marker path"),S()});let m=[];E("resize",S,!1),E("scroll",L,!1);function S(){function r(){var v;const t=document.querySelector(".prose").children,n={};let e="";for(const l of t){const x=l.getAttribute("id");l.tagName.toLowerCase().match(/^h[1-4]$/)?(n[x]={top:l},e=x):e&&((v=l.nextElementSibling)!=null&&v.tagName.toLowerCase().match(/^h[1-4]$/))&&Object.assign(n[e],{bottom:l})}const a=t[t.length-1],h=a.tagName.toLowerCase()!=="style"?a:a.previousElementSibling;return Object.assign(n[e],{bottom:h}),n}const s=r();m=Array.from(g.querySelectorAll("li")).map(t=>{const n=t.querySelector("a"),e=n.getAttribute("href").slice(1);return{listItem:t,anchor:n,boundingTop:s[e].top,boundingBottom:s[e].bottom,pathEnd:0,pathStart:0}});const o=[];let i=-999;m.forEach(function(t,n){const e=t.anchor.offsetLeft-5,a=t.anchor.offsetTop,h=t.anchor.offsetHeight;n===0?(o.push("M",e,a,"L",e,a+h),t.pathStart=0):(i!==e&&o.push("L",i,a),o.push("L",e,a),c.setAttribute("d",o.join(" ")),t.pathStart=c.getTotalLength()||0,o.push("L",e,a+h)),i=e,c.setAttribute("d",o.join(" ")),t.pathEnd=c.getTotalLength()}),f=c.getTotalLength(),L()}function L(){const r=window.innerHeight;let s=f,o=0,i=0;m.forEach(function(t){var a;const n=t.boundingTop.getBoundingClientRect().top;(((a=t.boundingBottom)==null?void 0:a.getBoundingClientRect().bottom)||t.boundingTop.getBoundingClientRect().bottom)>r*G&&n<r*(1-V)?(s=Math.min(t.pathStart,s),o=Math.max(t.pathEnd,o),i+=1,t.listItem.classList.add("visible")):t.listItem.classList.remove("visible")}),i>0&&s<o?(s!==y||o!==k)&&(c.setAttribute("stroke-dashoffset","1"),c.setAttribute("stroke-dasharray","1, "+s+", "+(o-s)+", "+f),c.setAttribute("opacity","1")):c.setAttribute("opacity","0"),y=s,k=o}const C=M();return(r,s)=>{var t,n;const o=H,i=$;return A(),T("nav",{class:"doc-toc",style:j({"--header-extra-position":p(C)+"px"})},[I("div",{class:_([(t=d.links)!=null&&t.length?"doc-toc__container":"doc-toc__empty"])},[B(r.$slots,"top",{},void 0,!0),(n=d.links)!=null&&n.length?(A(),T("button",{key:0,class:"doc-toc__button group",tabindex:"-1",onClick:s[0]||(s[0]=e=>u.value=!p(u))},[I("span",D,q(d.title),1),b(o,{name:"i-heroicons-chevron-down-20-solid",class:_(["2xl:!hidden",["doc-toc__icon",p(u)?"doc-toc__icon--active":"doc-toc__icon--inactive"]])},null,8,["class"])])):O("",!0),b(i,{links:d.links,class:_([p(u)?"2xl:block":"hidden 2xl:block"])},null,8,["links","class"]),b(z,{style:{"margin-top":"0"}}),B(r.$slots,"bottom",{},void 0,!0)],2)],4)}}}),Q=R(U,[["__scopeId","data-v-0147fc06"]]);export{Q as default};
